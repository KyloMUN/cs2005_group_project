(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var i=n(11),l=n(12),u=n(15),h=n(13),p=n(16),d=n(21),g=n(46),w=n(159),f=n(166),m=n(162),b=n(164),v=n(165),O=n(161),j=(n(110),n(58)),y=function(e){return 0===Object.entries(e).length&&e.constructor===Object},E=function(e){return r.a.createElement(v.a,{label:e.label,onClick:function(){e.history.push(e.whereto)},margin:{bottom:"0.5em"}})},k=n(89),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(k.PulseLoader,{sizeUnit:"em",size:1,color:qe.global.colors.brand,loading:!0})}}]),t}(a.Component),S=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"grabOptions",value:function(){return this.props.loggedIn?y(this.props.whoami)?r.a.createElement(C,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{label:"Homepage",whereto:"/",history:this.props.history}),r.a.createElement(E,{label:"Account",whereto:"/account",history:this.props.history}),r.a.createElement(E,{label:"Logout",whereto:"/logout",history:this.props.history})):r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{label:"Homepage",whereto:"/",history:this.props.history}),r.a.createElement(E,{label:"Login",whereto:"/login",history:this.props.history}))}},{key:"render",value:function(){return r.a.createElement(f.a,{width:"medium",background:"light-2",elevation:"small",align:"center",justify:"center",gap:"small"},this.grabOptions())}}]),t}(a.Component),x=Object(d.connect)(function(e){return{loggedIn:e.login.loggedIn,whoami:e.whoami}},function(){return{}})(Object(j.a)(S)),A=n(31),P=n(24),U=n(90),I=n(92),_=n(32),z="LOGIN_SAGA",R="LOGIN_FAIL",W="LOGIN_SUCCESS",L="LOGOUT_SAGA",N="CREATE_NEW_USER_SAGA",G="CREATE_QUIZ_SAGA",T="GET_WHOAMI_SAGA",q="GET_WHOAMI_SUCCESS",H="GET_WHOAMI_FAIL",M="CLEAR_WHOAMI",F="CHANGE_PASSWORD_SAGA",B={token:null,loggedIn:!1};var Q={};var D=Object(A.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return e;case W:return Object(_.a)({},e,{token:t.token,loggedIn:!0});case R:return e;case L:return Object(_.a)({},B);default:return e}},whoami:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return e;case q:return Object(_.a)({},e,{classes:t.classes,username:t.username,realname:t.realname,roles:t.roles,questionBanks:t.question_banks});case H:return e;case M:return Object(_.a)({},Q);default:return e}}}),J=n(7),V=n.n(J),Z=n(8),$=n(91);function K(e){return{type:W,token:e}}function X(e){return{type:R,err:e}}var Y=n(48),ee="http://localhost:5000/api";function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(Y.a)(V.a.mark(function e(t,n){var a,r;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.token,e.next=3,fetch("".concat(ee,"/").concat(t),{headers:{Authorization:"JWT ".concat(a)}});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r);case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return re.apply(this,arguments)}function re(){return(re=Object(Y.a)(V.a.mark(function e(t,n){var a,r,o,c=arguments;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},a.token,e.next=3,fetch("".concat(ee,"/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:if(o=e.sent,r.ok){e.next=9;break}throw new Error(o);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(Y.a)(V.a.mark(function e(t){var n,a,r;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,e.next=3,ae("login",{username:n,password:a});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(Y.a)(V.a.mark(function e(t){var n,a;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,te("whoami",{token:n});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=V.a.mark(pe),ue=V.a.mark(de),he=V.a.mark(ge);function pe(e,t){var n,a;return V.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Z.b)(oe,e,t);case 3:if(n=r.sent,void 0===(a=n.access_token)){r.next=12;break}return r.next=8,Object(Z.d)(K(a));case 8:return r.next=10,Object(Z.d)(Object($.a)("/account"));case 10:r.next=14;break;case 12:return r.next=14,Object(Z.d)(X(n));case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(Z.d)(X(r.t0));case 20:case"end":return r.stop()}},le,null,[[0,16]])}function de(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)({type:M});case 2:case"end":return e.stop()}},ue)}function ge(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)([Object(Z.e)(z,pe),Object(Z.e)(L,de)]);case 2:case"end":return e.stop()}},he)}var we=V.a.mark(me),fe=V.a.mark(be);function me(e){var t;return V.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Z.b)(se,e);case 3:return t=n.sent,n.next=6,Object(Z.d)((r=t,Object(_.a)({type:q},r)));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(Z.d)((a=n.t0,{type:H,err:a}));case 12:case"end":return n.stop()}var a,r},we,null,[[0,8]])}function be(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.e)(T,me);case 2:case"end":return e.stop()}},fe)}var ve=V.a.mark(Oe);function Oe(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)([Object(Z.c)(ge),Object(Z.c)(be)]);case 2:case"end":return e.stop()}},ve)}var je=Object(P.a)(),ye=Object(I.a)(),Ee=[Object(g.routerMiddleware)(je),ye],ke=Object(U.composeWithDevTools)(A.applyMiddleware.apply(void 0,Ee)),Ce=Object(A.createStore)(Object(g.connectRouter)(je)(D),{},ke);ye.run(Oe);var Se=Ce,xe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Hello World!"))}}]),t}(a.Component),Ae=n(160),Pe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleLogin=function(){n.props.loginSaga(n.state.username,n.state.password)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{pad:"large",align:"center",background:{color:"light-1",opacity:"strong"},round:!0,gap:"small"},r.a.createElement(Ae.a,{placeholder:"Username",value:this.state.username,onChange:this.handleUsernameChange}),r.a.createElement(Ae.a,{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChange}),r.a.createElement(v.a,{label:"Login",onClick:this.handleLogin}))}}]),t}(a.Component),Ue=Object(d.connect)(function(e){return{}},function(e){return{loginSaga:function(t,n){return e(function(e,t){return{type:z,username:e,password:t}}(t,n))}}})(Pe),Ie=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).render=function(){return null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.logout(),this.props.history.push("/login")}}]),t}(a.Component),_e=Object(d.connect)(function(e){return{}},function(e){return{logout:function(){return e({type:L})}}})(Object(j.a)(Ie)),ze=n(163),Re=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={newUsername:"",newPassword:"",newRole:""},n.studentView=function(){var e=n.props.whoami,t=e.username,a=e.realname,o=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{level:"4"},"Hello ",a||t,", here are your classes:"),Object.keys(o).map(function(e){return r.a.createElement(E,{label:o[e].classname,key:e,whereto:"/view/class/".concat(o[e].id),history:n.props.history})}),r.a.createElement(E,{label:"Change password",whereto:"/changepassword",history:n.props.history}))},n.newUsernameChange=function(e){n.setState({newUsername:e.target.value})},n.newPasswordChange=function(e){n.setState({newPassword:e.target.value})},n.newRoleChange=function(e){n.setState({newRole:e.target.value})},n.handleCreateNewUser=function(){var e=n.state,t=e.newUsername,a=e.newPassword,r=e.newRole;n.props.createNewUserSaga(n.props.token,t,a,r)},n.teacherView=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{label:"Create new quiz",whereto:"/new/quiz",history:n.props.history}),r.a.createElement(f.a,{pad:"large",align:"center",background:{color:"light-1",opacity:"strong"},round:!0,gap:"small"},r.a.createElement(b.a,{level:"4",margin:"none"},"Create new user"),r.a.createElement(Ae.a,{type:"password",placeholder:"Username",value:n.state.newUsername,onChange:n.newUsernameChange}),r.a.createElement(Ae.a,{type:"password",placeholder:"Password",value:n.state.newPassword,onChange:n.newPasswordChange}),r.a.createElement(ze.a,{options:["Student","Professor"],value:n.state.newRole,onChange:n.newRoleChange}),r.a.createElement(v.a,{label:"Create",onClick:n.handleCreateNewUser})))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedIn?this.props.getWhoamiSaga(this.props.token):this.props.history.push("/login")}},{key:"render",value:function(){var e=this.props.whoami;return y(e)?r.a.createElement(C,null):e.roles.includes("professor")?this.teacherView():this.studentView()}}]),t}(a.Component),We=Object(d.connect)(function(e){return{token:e.login.token,loggedIn:e.login.loggedIn,whoami:e.whoami}},function(e){return{getWhoamiSaga:function(t){return e(function(e){return{type:T,token:e}}(t))},createNewUserSaga:function(t,n,a,r){return e(function(e,t,n,a){return{type:N,token:e,username:t,password:n,role:a}}(t,n,a,r))}}})(Object(j.a)(Re)),Le=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={oldPassword:"",newPassword:""},n.handleOldPasswordChange=function(e){n.setState({oldPassword:e.target.value})},n.handleNewPasswordChange=function(e){n.setState({newPassword:e.target.value})},n.handlePasswordChange=function(){n.props.changePasswordSaga(n.state.oldPassword,n.state.newPassword)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{pad:"large",align:"center",background:{color:"light-1",opacity:"strong"},round:!0,gap:"small"},r.a.createElement(Ae.a,{type:"password",placeholder:"Old password",value:this.state.oldPassword,onChange:this.handleOldPasswordChange}),r.a.createElement(Ae.a,{type:"password",placeholder:"New password",value:this.state.newPassword,onChange:this.handleNewPasswordChange}),r.a.createElement(v.a,{label:"Change",onClick:this.handlePasswordChange}))}}]),t}(a.Component),Ne=Object(d.connect)(function(e){return{}},function(e){return{changePasswordSaga:function(t,n){return e(function(e,t){return{type:F,oldPassword:e,newPassword:t}}(t,n))}}})(Le),Ge=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={quizname:""},n.handleSubmit=function(){n.props.createQuizSaga()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(f.a,{pad:"large",align:"center",background:{color:"light-1",opacity:"strong"},round:!0,gap:"small"},r.a.createElement(Ae.a,{placeholder:"Quiz name",value:this.state.quizname,onChange:function(t){return e.setState({quizname:t.target.quizname})}}),r.a.createElement(v.a,{label:"Submit",onClick:this.handleSubmit}))}}]),t}(a.Component),Te=Object(d.connect)(function(e){return{}},function(e){return{createQuizSaga:function(){return e({type:G})}}})(Ge),qe={global:{colors:{brand:"#BF263C"},font:{family:"Roboto",size:"14px",height:"20px"}}},He=function(e){return r.a.createElement(f.a,Object.assign({tag:"header",direction:"row",align:"center",justify:"between",background:"brand",pad:{left:"medium",right:"small",vertical:"small"},elevation:"medium",style:{zIndex:"1"}},e))},Me=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={showSidebar:!1},n.toggleAppBar=function(){n.setState(function(e){return{showSidebar:!e.showSidebar}})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{theme:qe,full:!0},r.a.createElement(d.Provider,{store:Se},r.a.createElement(g.ConnectedRouter,{history:je},r.a.createElement(f.a,{fill:!0},r.a.createElement(He,null,r.a.createElement(b.a,{level:"3",margin:"none"},"Quizm"),r.a.createElement(v.a,{icon:r.a.createElement(O.a,null),onClick:this.toggleAppBar})),r.a.createElement(f.a,{direction:"row",flex:!0,overflow:{horizontal:"hidden"}},r.a.createElement(f.a,{flex:!0,align:"center",justify:"center"},r.a.createElement(w.a,{path:"/",exact:!0,component:xe}),r.a.createElement(w.a,{path:"/new/quiz",component:Te}),r.a.createElement(w.a,{path:"/login",component:Ue}),r.a.createElement(w.a,{path:"/logout",component:_e}),r.a.createElement(w.a,{path:"/account",component:We}),r.a.createElement(w.a,{path:"/changepassword",component:Ne})),this.state.showSidebar&&r.a.createElement(x,null))))))}}]),t}(a.Component),Fe=document.getElementById("root");Object(o.render)(r.a.createElement(Me,null),Fe),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");c?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):s(e)})}}()},93:function(e,t,n){e.exports=n(146)}},[[93,2,1]]]);
//# sourceMappingURL=main.89fc36f7.chunk.js.map